{% extends "base.html" %}
{% block title %}Projects - My Cosmic-Neural Blog{% endblock %}
{% block content %}
<h1>Projects</h1>
<div class="projects-list">
    {% for project in projects %}
    <div class="project-card">
        <header class="post-header">
            <h1 class="post-title">{{ project.title }}</h1>
            <div class="post-meta">
                <span class="post-date">{{ project.date_posted.strftime('%B %d, %Y') }}</span>
            </div>
        </header>
        {% if project.image_filename %}
        <div class="post-image">
            <!-- Responsive image with srcset -->
            {% if USING_SPACES %}
            <img src="{{ SPACES_URL }}/medium/{{ project.image_filename }}"
                 srcset="{{ get_srcset(project.image_filename) }}"
                 sizes="(max-width: 600px) 100vw, (max-width: 1200px) 80vw, 800px"
                 alt="{{ project.title }}"
                 class="post-feature-img"
                 loading="eager">
            {% else %}
            <img src="{{ url_for('static', filename='images/medium/' + project.image_filename) }}"
                 srcset="{{ get_srcset(project.image_filename) }}"
                 sizes="(max-width: 600px) 100vw, (max-width: 1200px) 80vw, 800px"
                 alt="{{ project.title }}"
                 class="post-feature-img"
                 loading="eager"> <!-- Load eagerly for above-the-fold image -->
            {% endif %}
        </div>
        {% endif %}

        <div class="post-content">
            {{ project.description }}
        </div>
        {% if project.github_link %}
        <div class="post-links">
            <a href="{{ project.github_link }}" target="_blank" class="github-link">
                <i class="fa-brands fa-github"></i> View on GitHub
            </a>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}
